services:
  # ===================================
  # ðŸ§  Backend Gateway (be-skillforge)
  # ===================================
  be-skillforge:
    build:
      context: .
      target: be-skillforge
    container_name: be-skillforge
    env_file:
      - .env
    ports:
      - '${PORT:-3000}:3000'
    depends_on:
      - ai-service
    networks:
      - skillforge-net
    restart: unless-stopped

  # ===================================
  # ðŸ¤– AI Service
  # ===================================
  ai-service:
    build:
      context: .
      target: ai-service
    container_name: ai-service
    env_file:
      - .env
    ports:
      - '${AI_SERVICE_PORT:-3001}:3001'
    networks:
      - skillforge-net
    restart: unless-stopped

# --- Shared Network for app-to-app communication ---
networks:
  skillforge-net:
    driver: bridge
